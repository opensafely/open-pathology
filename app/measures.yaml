- name: "Methotrexate: LFT safety monitoring completion rate"
  explanation: >
    An ALT blood test is one of a group of liver function tests (LFTs) which are used to detect problems with the function of the liver.
    Patients taking methotrexate are recommended to have their LFTs checked at least every 3 months.
    Following these recommendations helps identify any signs of liver toxicity in these patients, which reduces the risk of adverse drug events.
  measure_design: >
    Numerator: Patients aged ≥ 18 years prescribed methotrexate, who had LFTs within the prior 3 months. 
    Denominator: Patients aged ≥ 18 years prescribed methotrexate.
    Rationale for design choices: The 3-month look-back period aligns with national guidance on LFT monitoring for patients on methotrexate. We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    In a small number of places, an ALT test may NOT be included within a liver function test.
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only tests results returned to GPs are included, which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/alanine-aminotransferase-alt-tests-numerical-value/
  counts_table_url: output/alt_mtx_tests/event_counts.csv
  top_5_codes_table_url: output/alt_mtx_tests/top_5_code_table.csv
  deciles_table_url: output/alt_mtx_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Percentage of patients aged ≥ 18 prescribed methotrexate (denominator) who had LFTs within the prior 3 months (numerator)

- name: "Methotrexate: LFT safety monitoring results"
  explanation: >
    An ALT blood test is one of a group of liver function tests (LFTs) which are used to detect problems with the function of the liver.
    Patients taking methotrexate are recommended to have their LFTs checked at least every 3 months.
    Following these recommendations helps identify any signs of liver toxicity in these patients, which reduces the risk of adverse drug events.
  measure_design: >
    Numerator: Patients aged ≥ 18 years prescribed methotrexate with LFTs within the stated month, who had an out-of-range result. 
    Denominator: Patients aged ≥ 18 years prescribed methotrexate with LFTs within the stated month.
    Rationale for design choices: The 1-month look-back period helps identify more instances where the latest result is out-of-range result, since if a longer look-back period was used then it is likely that many out-of-range results would have been superseded by a follow-up test showing an in-range result. We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    In a small number of places, an ALT test may NOT be included within a liver function test.
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only tests results returned to GPs are included, which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/alanine-aminotransferase-alt-tests/
  counts_table_url: output/alt_mtx_ref_tests/event_counts.csv
  top_5_codes_table_url: output/alt_mtx_ref_tests/top_5_code_table.csv
  deciles_table_url: output/alt_mtx_ref_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Percentage of patients aged ≥ 18 prescribed methotrexate with LFTs within the stated month (denominator) who had an out-of-range result (numerator)

- name: Liver Function - Alanine Transferaminase (ALT) testing rate
  explanation: >
    An ALT blood test is one of a group of liver function tests (LFTs) which are used to detect problems with the function of the liver.
    It is often used to monitor patients on medications which may affect the liver or which rely on the liver to break them down within the body.
    They are also tested for patients with known or suspected liver dysfunction.
  measure_design: >
    Numerator: Patients aged ≥ 18 years, who had LFTs within the stated month.
    Denominator: Patients aged ≥ 18 years.
    Rationale for design choices: The 1-month look-back period helps create a responsive measure that can clearly capture seasonal variation or any other factors that provoke changes in testing rate between months. We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    **In a small number of places, an ALT test may NOT be included within a liver function test.**
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only tests results returned to GPs are included,
    which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/alanine-aminotransferase-alt-tests/2298df3e/
  counts_table_url: output/alt_tests/event_counts.csv
  top_5_codes_table_url: output/alt_tests/top_5_code_table.csv
  deciles_table_url: output/alt_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Percentage of patients aged ≥ 18 (denominator) who had LFTs within the stated month (numerator)
  measures_tables_url: output/alt_tests/demographic_table_counts_per_week.csv

- name: Cholesterol testing rate
  explanation: >
    A commonly-used blood test used as part of a routine cardiovascular disease 10 year risk assessment
    and also to identify patients with lipid disorders (e.g. familial hypercholesterolaemia).
    This helps ensure appropriate treatment,
    with the aim of reducing long term risks of complications such as stroke or myocardial infarction.
  measure_design: >
    Numerator: 
    Denominator: 
    Rationale for design choices: We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only tests results returned to GPs are included,
    which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/cholesterol-tests/0f1b2a4c/
  counts_table_url: output/chol_tests/event_counts.csv
  top_5_codes_table_url: output/chol_tests/top_5_code_table.csv
  deciles_table_url: output/chol_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Percentage of patients aged ≥ 18 (denominator) who had a cholesterol test within the stated month (numerator)
  measures_tables_url: output/chol_tests/demographic_table_counts_per_week.csv

- name: HbA1c testing rate in patients with Type 2 diabetes
  explanation: >
    HbA1c is a long term indicator of diabetes control.
    NICE guidelines recommend that individuals with diabetes have their HbA1c measured at least twice a year.
    Poor diabetic control can place individuals living with diabetes at an increased risk of the complications of diabetes.
  measure_design: >
    Numerator: 
    Denominator: 
    Rationale for design choices: We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only tests results returned to GPs are included, which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/glycated-haemoglobin-hba1c-tests/2ab11f20/
  counts_table_url: output/hba1c_diab_tests/event_counts.csv
  top_5_codes_table_url: output/hba1c_diab_tests/top_5_code_table.csv
  deciles_table_url: output/hba1c_diab_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Percentage of patients aged ≥ 18 with type 2 diabetes (denominator) who had an HbA1c test within the prior 6 months (numerator)

- name: HbA1c results in patients with Type 2 diabetes
  explanation: >
    HbA1c is a long term indicator of diabetes control.
    NICE guidelines recommend that individuals with diabetes have their HbA1c measured at least twice a year.
    Poor diabetic control can place individuals living with diabetes at an increased risk of the complications of diabetes.
  measure_design: >
    Numerator: 
    Denominator: 
    Rationale for design choices: We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only tests results returned to GPs are included, which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/glycated-haemoglobin-hba1c-tests-numerical-value/5134e926/
  counts_table_url: output/hba1c_diab_mean_tests/event_counts.csv
  top_5_codes_table_url: output/hba1c_diab_mean_tests/top_5_code_table.csv
  deciles_table_url: output/hba1c_diab_mean_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Mean HbA1c result in patients aged ≥ 18 with type 2 diabetes within the stated month

- name: Glycated Haemoglobin A1c (HbA1c) testing rate
  explanation: >
    HbA1c is a long term indicator of diabetes control.
    NICE guidelines recommend that individuals with diabetes have their HbA1c measured at least twice a year.
    Poor diabetic control can place individuals living with diabetes at an increased risk of the complications of diabetes.
  measure_design: >
    Numerator: 
    Denominator: 
    Rationale for design choices: We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only test results returned to GPs are included,
    which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/glycated-haemoglobin-hba1c-tests/3e5b1269/
  counts_table_url: output/hba1c_tests/event_counts.csv
  top_5_codes_table_url: output/hba1c_tests/top_5_code_table.csv
  deciles_table_url: output/hba1c_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Percentage of patients aged ≥ 18 (denominator) who had an HbA1c test within the stated month (numerator)

- name: Prostate-specific antigen testing rate
  explanation: >
    Prostate-specific antigen (PSA) is a protein produced by the prostate gland which can be monitored to help detect prostate cancer.
    NICE recommends offering PSA testing to men who have unexplained symptoms that could be attributable to prostate cancer.
    Following these recommendations helps ensure early detection of clinically significant prostate cancer while avoiding unnecessary harm from overdiagnosis and overtreatment.
  measure_design: >
    Numerator: 
    Denominator: 
    Rationale for design choices: We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only tests results returned to GPs are included, which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/psa-numeric-value/2258a288/
  counts_table_url: output/psa_tests/event_counts.csv
  top_5_codes_table_url: output/psa_tests/top_5_code_table.csv
  deciles_table_url: output/psa_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Percentage of men aged ≥ 18 (denominator) who had a PSA test within the stated month (numerator)

- name: Prostate-specific antigen test results
  explanation: >
    Prostate-specific antigen (PSA) is a protein produced by the prostate gland which can be monitored to help detect prostate cancer.
    NICE recommends offering PSA testing to men who have unexplained symptoms that could be attributable to prostate cancer.
    Following these recommendations helps ensure early detection of clinically significant prostate cancer while avoiding unnecessary harm from overdiagnosis and overtreatment.
  measure_design: >
    Numerator: 
    Denominator: 
    Rationale for design choices: We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only tests results returned to GPs are included, which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/psa-numeric-value/2258a288/
  counts_table_url: output/psa_ref_tests/event_counts.csv
  top_5_codes_table_url: output/psa_ref_tests/top_5_code_table.csv
  deciles_table_url: output/psa_ref_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Percentage of men aged ≥ 18 with a PSA test within the stated month (denominator) who had an out-of-range result (numerator)

- name: Red Blood Cell (RBC) count testing rate
  explanation: >
    RBC is completed as part of a group of tests referred to as a full blood count (FBC),
    used to detect a variety of disorders of the blood, such as anaemia and infection.
  measure_design: >
    Numerator: 
    Denominator: 
    Rationale for design choices: We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only tests results returned to GPs are included,
    which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/red-blood-cell-rbc-tests/576a859e/
  counts_table_url: output/rbc_tests/event_counts.csv
  top_5_codes_table_url: output/rbc_tests/top_5_code_table.csv
  deciles_table_url: output/rbc_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Percentage of patients aged ≥ 18 (denominator) who had an RBC test within the stated month (numerator)
  measures_tables_url: output/rbc_tests/demographic_table_counts_per_week.csv

- name: Renal Function - Sodium testing rate
  explanation: >
    Sodium is completed as part of a group of tests referred to as a renal profile,
    used to detect a variety of disorders of the kidneys.
    A renal profile is also often used to monitor patients on medications which may affect the kidneys or which rely on the kidneys to remove them from the body.
  measure_design: >
    Numerator: 
    Denominator: 
    Rationale for design choices: We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only tests results returned to GPs are included,
    which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/sodium-tests-numerical-value/32bff605/
  counts_table_url: output/sodium_tests/event_counts.csv
  top_5_codes_table_url: output/sodium_tests/top_5_code_table.csv
  deciles_table_url: output/sodium_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Percentage of patients aged ≥ 18 (denominator) who had a sodium test within the stated month (numerator)
  measures_tables_url: output/sodium_tests/demographic_table_counts_per_week.csv

- name: Blood Pressure monitoring rate
  explanation: >
    A commonly-used assessment used to identify patients with hypertension or to ensure optimal treatment for those with known hypertension.
    This helps ensure appropriate treatment, with the aim of reducing long term risks of complications from hypertension such as stroke,
    myocardial infarction and kidney disease.
  measure_design: >
    Numerator: 
    Denominator: 
    Rationale for design choices: We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only test results returned to GPs are included,
    which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/systolic-blood-pressure-qof/3572b5fb/
  counts_table_url: output/systol_tests/event_counts.csv
  top_5_codes_table_url: output/systol_tests/top_5_code_table.csv
  deciles_table_url: output/systol_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Percentage of patients aged ≥ 18 (denominator) who had a BP test within the stated month (numerator)
  measures_tables_url: output/systol_tests/demographic_table_counts_per_week.csv

- name: Vitamin D testing rate
  explanation: >
    Vitamin D is essential for bone health, immune function and more.
    NICE recommends testing vitamin D levels in certain situations such as where there are symptoms suggestive of deficiency, or where suspected bone disease exists.
    Good management of vitamin D levels reduces the risk of complications from deficiency, such as osteoporosis, fractures, or impaired immune function.
  measure_design: >
    Numerator: 
    Denominator: 
    Rationale for design choices: We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only tests results returned to GPs are included, which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/vitamin-d-level/1032ad60/
  counts_table_url: output/vit_d_tests/event_counts.csv
  top_5_codes_table_url: output/vit_d_tests/top_5_code_table.csv
  deciles_table_url: output/vit_d_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Percentage of patients aged ≥ 18 (denominator) who had a vitamin D test within the stated month (numerator)

- name: Vitamin D test results
  explanation: >
    Vitamin D is essential for bone health, immune function and more.
    NICE recommends testing vitamin D levels in certain situations such as where there are symptoms suggestive of deficiency, or where suspected bone disease exists.
    Good management of vitamin D levels reduces the risk of complications from deficiency, such as osteoporosis, fractures, or impaired immune function.
  measure_design: >
    Numerator: 
    Denominator: 
    Rationale for design choices: We excluded patients under 18 to avoid conflating adult and paediatric pathology testing, which can often show different patterns and follow different protocols.
  caveats: >
    We use codes which represent results reported to GPs so tests requested but not yet reported are not included.
    Only tests results returned to GPs are included, which will usually exclude tests requested while a person is in hospital and other settings like a private clinic.
  codelist_url: https://www.opencodelists.org/codelist/opensafely/vitamin-d-level/1032ad60/
  counts_table_url: output/vit_d_ref_tests/event_counts.csv
  top_5_codes_table_url: output/vit_d_ref_tests/top_5_code_table.csv
  deciles_table_url: output/vit_d_ref_tests/deciles_table_counts_per_week_per_practice.csv
  chart_units: Percentage of patients aged ≥ 18 with a vitamin D test within the stated month (denominator) who had a result lower than reference range (numerator)
